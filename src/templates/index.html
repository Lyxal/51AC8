<!DOCTYPE html>
<html lang="en">
    <head>
        <title>51AC8 Interpreter</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            body {
                background: #242424;
                color: #eeeeee;
                font-style: "sans-serif";
            }
            textarea {
                color: #eeeeee;
                background: #343434;
                font-family: "Deja Vu Sans Mono", "monospace";
                width: 100%;
                border: none;
                padding: 2px;
            }
            a {
                color: #aaaaee;
            }
            button {
                color: #eeeeee;
                background: #444444;
                border: none;
                padding: 5px;
            }
            summary {
                padding: 5px;
            }
        </style>
    </head>
    <body>
        <script>
            function copyToClipboard(elem) {
                var e = document.getElementById(elem);
                e.select();
                document.execCommand("copy");
            }
        </script>
        <h1><a href="https://github.com/PyGamer0/51AC8">51AC8</a></h1><hr>
        <button id="run">Run</button>
        <button id="cmc">CMC</button>
        <button id="cgcc">CGCC</button>
        <br>
        <details>
            <summary>FLAGS</summary>
            <textarea id="flags"></textarea><br>
        </details>

        <details>
            <summary>HEADER</summary>
            <textarea id="header"></textarea><br>
        </details>

        <details open>
            <summary id="code-count">CODE: 0 bytes (SBCS)</summary>
            <textarea id="code"></textarea><br>
        </details>

        <details>
            <summary>FOOTER</summary>
            <textarea id="footer"></textarea>
        </details>

        <details>
            <summary>STDIN</summary>
            <textarea id="stdin"></textarea>
        </details>

        <details open>
            <summary>STDOUT</summary>
            <button onclick="copyToClipboard('stdout')" style="height:auto; display: inline-block;" type="button">Copy</button>
            <textarea id="stdout" readonly></textarea>
        </details>

        <details>
            <summary>STDERR</summary>
            <textarea id="stderr" readonly></textarea>
        </details>

        <script>
            function updateCount() {
                var code_elem = document.getElementById("code");
                var count_elem = document.getElementById("code-count");
                count_elem.innerText = `CODE: ${code_elem.value.length} bytes (SBCS)`;
            }
            function decodeUrl() {
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);

                var flags = urlParams.get("flags");
                var header = urlParams.get("header");
                var code = urlParams.get("code");
                var footer = urlParams.get("footer");
                var stdin = urlParams.get("stdin");

                var flags_elem = document.getElementById("flags");
                var header_elem = document.getElementById("header");
                var code_elem = document.getElementById("code");
                var footer_elem = document.getElementById("footer");
                var stdin_elem = document.getElementById("stdin");

                if (flags || header || code || footer || stdin) {
                    flags_elem.value = flags;
                    header_elem.value = header;
                    code_elem.value = code;
                    footer_elem.value = footer;
                    stdin_elem.value = stdin;
                }
            }
            decodeUrl()
            updateCount()
        </script>
    </body>
</html>

